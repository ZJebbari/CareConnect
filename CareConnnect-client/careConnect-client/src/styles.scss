@use "@angular/material" as mat;

// 1Ô∏è‚É£ Define palettes (M2 palettes in Angular 19)
$careconnect-primary: mat.m2-define-palette(mat.$m2-indigo-palette, 600);
$careconnect-accent: mat.m2-define-palette(
  mat.$m2-pink-palette,
  A200,
  A100,
  A400
);
$careconnect-warn: mat.m2-define-palette(mat.$m2-red-palette, 600);

// 2Ô∏è‚É£ Create the M2 light theme
$careconnect-theme: mat.m2-define-light-theme(
  (
    color: (
      primary: $careconnect-primary,
      accent: $careconnect-accent,
      warn: $careconnect-warn,
    ),
    typography: mat.m2-define-typography-config(),
    density: 0,
  )
);

:root {
  --white: #fff;
  --lightGrayBackground: #ededed;
  --darkGrayBackground: #29292a;
  --lightPrimary: #0073c8;

  --page-side-margin: 10px;
  --action-bar-height: 64px;
  --hl-banner-height: 64px;
  --paginator-height: 55px;
  --page-height: calc(
    100vh - var(--action-bar-height) - var(--hl-banner-height)
  );
  --filter-bar-height: 60px;
  --filter-chip-container-height: 40px;
  --table-border-radius: 15px;
}

// Page
.page-container {
  margin: var(--page-side-margin);
  border-radius: var(--table-border-radius) !important;
}

// Table
.no-data-row-container {
  display: flex;
  width: 100%;
  justify-content: center;
  align-items: center;
  height: 100px;
}

.no-data-row-span {
  font-weight: bold;
}

.paginator {
  @include mat.elevation(8);
  height: var(--paginator-height);
  border-radius: 0 0 var(--table-border-radius) var(--table-border-radius) !important;
}

.table-container {
  @include mat.elevation(8);
  overflow: auto;
  border-radius: var(--table-border-radius) 0 0 !important;

  // default table (page + paginator)
  &.table-default {
    height: calc(
      var(--page-height) - var(--paginator-height) -
        (2 * var(--page-side-margin))
    );

    // default but NO paginator
    &.table-paginatorless {
      height: calc(var(--page-height) - (2 * var(--page-side-margin)));
    }
  }

  // when summary panel OR filter bar is open
  &.table-summary-panel-open,
  &.table-filter-bar-open {
    height: calc(
      var(--page-height) - var(--paginator-height) -
        (2 * var(--page-side-margin)) - var(--filter-bar-height)
    );

    &.table-paginatorless {
      height: calc(
        var(--page-height) - (2 * var(--page-side-margin)) -
          var(--filter-bar-height)
      );
    }
  }

  // when the mat-chip (your chip container) is open
  &.table-mat-chip-open {
    height: calc(
      var(--page-height) - var(--paginator-height) -
        (2 * var(--page-side-margin)) - var(--filter-bar-height) -
        var(--filter-chip-container-height)
    );

    &.table-paginatorless {
      height: calc(
        var(--page-height) - (2 * var(--page-side-margin)) -
          var(--filter-bar-height) - var(--filter-chip-container-height)
      );
    }
  }

  // filter bar + summary open together
  &.table-filter-bar-and-summary-open {
    height: calc(
      var(--page-height) - var(--paginator-height) -
        (2 * var(--page-side-margin)) - var(--filter-bar-height) -
        var(--filter-chip-container-height)
    );

    &.table-paginatorless {
      height: calc(
        var(--page-height) - (2 * var(--page-side-margin)) -
          var(--filter-bar-height) - var(--filter-chip-container-height)
      );
    }
  }

  // EVERYTHING open
  &.table-all-open {
    height: calc(
      var(--page-height) - var(--paginator-height) -
        (2 * var(--page-side-margin)) - var(--filter-bar-height) -
        var(--filter-chip-container-height)
    );

    &.table-paginatorless {
      height: calc(
        var(--page-height) - (2 * var(--page-side-margin)) -
          var(--filter-bar-height) - var(--filter-chip-container-height)
      );
    }
  }
}

tr.table-expansion-row {
  height: 0;
}

tr.table-expansion-td {
  padding: 0 !important;
}

td.standard-expansion-td {
  padding: 0 !important;
}

// Action Bar
.action-bar-container {
  display: flex;
  flex-direction: row;
  justify-content: space-between;
  align-items: center;
  padding: 0 20px;
  height: var(--action-bar-height);
  width: 100%;
  box-sizing: border-box;
  overflow: hidden;
  gap: 10px;
}

.action-bar-content {
  display: flex;
  gap: 10px;
}

.action-bar-search {
  width: 240px;
}

.action-bar-title-container {
  display: flex;
  align-items: center;

  span {
    font-size: 26pt;
    font-weight: lighter;
  }

  @media only screen and (max-width: 1100px) {
    span {
      font-size: 20pt;
    }
  }
}

.action-bar-search-icon {
  position: relative;
  transform: scale(1.25);
}

.action-bar-clear-button {
  margin-top: -13px;
}

.filter-button {
  @extend .standard-button;

  @media only screen and (max-width: 1100px) {
    .mat-icon {
      margin-right: 0 !important;
    }

    span {
      display: none;
    }
  }
}

// Filter Bar
.lms-filter-bar-container {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 10px 25px;
  border-bottom: 1px solid #ccc;
}

.filter-chip-container {
  display: flex;
  flex-direction: row;
  gap: 10px;
  padding: 0 20px;
}

.filter-bar-title {
  font-weight: 600;
  font-size: 11pt;
}

// Dialog
.dialog-button {
  text-transform: uppercase !important;
}

// Common
.lms-clickable {
  cursor: pointer;
}

.standard-button {
  height: 56px !important;
  text-transform: uppercase !important;
  font-weight: 500 !important;
  font-size: 15px !important;
  text-align: center;
  padding: 22.5px 22.5px !important;

  mat-icon {
    min-width: 16px !important;
  }
}

.standard-icon {
  font-size: 15px;
  text-align: center;
  align-content: space-evenly;
}

// Expansion Panel
.expansion-panel-container {
  border: 1px black solid;
}

.expansion-panel-section {
  margin: 10px;
  padding: 20px;
  background-color: #f1f1f1;
  border-radius: 10px;
}

.expansion-panel-content-container {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  gap: 10px;
}

.expansion-panel-content {
  display: flex;
  gap: 10px;
  align-items: center;
}

.mat-calendar {
  background-color: #f1f1f1 !important;  // YOUR COLOR HERE
}

// Light / Dark Mode Theming
@mixin light() {
  .action-bar-container {
    background-color: var(--lightGrayBackground);
  }

  tr.table-row:not(.table-row-expanded):hover {
    background: whitesmoke;
  }

  tr.table-row-expanded {
    background-color: #333 !important;
    color: var(--white);

    mat-checkbox {
      --mdc-checkbox-unselected-icon-color: var(--white);
      --mdc-checkbox-selected-hover-state-layer-color: var(--white);
      --mdc-checkbox-unselected-focus-icon-color: var(--white);
      --mdc-checkbox-unselected-focus-state-layer-color: var(--white);
    }
  }

  .filter-button-active {
    border-color: var(--lightPrimary) !important;
  }

  .dialog-button:disabled {
    color: rgba(0, 0, 0, 0.38) !important;
  }
}

@mixin dark() {
  /* existing stuff you already have... */
  .action-bar-container {
    background-color: var(--darkGrayBackground);
  }

  tr.table-row:not(.table-row-expanded):hover {
    background: rgb(92, 92, 92);
  }

  tr.table-row-expanded {
    background-color: #495052 !important;
  }

  .filter-button-active {
    border-color: var(--darkPrimary) !important;
  }

  .dialog-button:disabled {
    color: rgba(255, 255, 255, 0.5) !important;
  }

  .expansion-panel-section {
    background-color: #303030;
  }

  .action-bar-title-container span {
    color: var(--white);
  }

  .standard-button {
    background-color: #c764ee !important;
    color: var(--white) !important;
  }

  /* üîπ NEW: page background */
  .page-container {
    background-color: #121212;
  }

  /* üîπ NEW: table container card */
  .table-container {
    background-color: #1e1e1e;
    color: #e0e0e0;
  }

  /* üîπ NEW: mat-table itself */
  table.mat-mdc-table {
    background: transparent; // so the container color shows
  }

  /* üîπ NEW: header row */
  .mat-mdc-header-row {
    background-color: #242424;
  }

  .mat-mdc-header-cell {
    color: #ffffff;
    border-bottom-color: #333;
  }

  /* üîπ NEW: normal rows */
  .mat-mdc-row {
    background-color: #1e1e1e;
    color: #e0e0e0;
    border-bottom-color: #333;
  }

  /* optional: zebra stripes */
  .mat-mdc-row:nth-child(even) {
    background-color: #232323;
  }

  /* paginator */
  .mat-mdc-paginator {
    background-color: #121212;
    color: #e0e0e0;
  }
  
  input {
    color: #e0e0e0 !important;
  }
}


.light-theme {
  @include light();
}

.dark-theme {
  @include dark();
}

// 3Ô∏è‚É£ Generate ALL Material styles for this theme
@include mat.all-component-themes($careconnect-theme);

// OPTIONAL: your app layout styles
html,
body {
  height: 100%;
  margin: 0;
  font-family: Roboto, "Helvetica Neue", sans-serif;
}
